{"ast":null,"code":"import _regeneratorRuntime from\"/home/lordadhaar/repos/WeatherApp-react-tlwnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lordadhaar/repos/WeatherApp-react-tlwnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/lordadhaar/repos/WeatherApp-react-tlwnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{DateTime}from\"luxon\";var API_KEY=\"20f7632ffc2c022654e4093c6947b4f4\";var BASE_URL=\"https://api.openweathermap.org/data/2.5\";// https://api.openweathermap.org/data/2.5/onecall?lat=48.8534&lon=2.3488&exclude=current,minutely,hourly,alerts&appid=1fa9ff4126d95b8db54f3897a208e91c&units=metric\nfunction getWeatherData(infoType,searchParams){try{var url=new URL(BASE_URL+\"/\"+infoType);url.search=new URLSearchParams(_objectSpread(_objectSpread({},searchParams),{},{appid:API_KEY}));return fetch(url).then(function(res){return res.json();});}catch(err){alert(err);console.log(err);}};var formatCurrentWeather=function formatCurrentWeather(data){var _data$coord=data.coord,lat=_data$coord.lat,lon=_data$coord.lon,_data$main=data.main,temp=_data$main.temp,feels_like=_data$main.feels_like,temp_min=_data$main.temp_min,temp_max=_data$main.temp_max,humidity=_data$main.humidity,name=data.name,dt=data.dt,_data$sys=data.sys,country=_data$sys.country,sunrise=_data$sys.sunrise,sunset=_data$sys.sunset,weather=data.weather,speed=data.wind.speed;var _weather$=weather[0],details=_weather$.main,icon=_weather$.icon;return{lat:lat,lon:lon,temp:temp,feels_like:feels_like,temp_min:temp_min,temp_max:temp_max,humidity:humidity,name:name,dt:dt,country:country,sunrise:sunrise,sunset:sunset,details:details,icon:icon,speed:speed};};var formatForecastWeather=function formatForecastWeather(data){var timezone=data.timezone,daily=data.daily,hourly=data.hourly;console.log(data);daily=daily.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,\"ccc\"),temp:d.temp.day,icon:d.weather[0].icon};});hourly=hourly.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,\"hh:mm a\"),temp:d.temp,icon:d.weather[0].icon};});console.log(daily,hourly,timezone);return{timezone:timezone,daily:daily,hourly:hourly};};var getFormattedWeatherData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchParams){var formattedCurrentWeather,lat,lon,formattedForecastWeather;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWeatherData(\"weather\",searchParams).then(formatCurrentWeather);case 2:formattedCurrentWeather=_context.sent;lat=formattedCurrentWeather.lat,lon=formattedCurrentWeather.lon;_context.next=6;return getWeatherData(\"onecall\",{lat:lat,lon:lon,exclude:\"current,minutely,alerts\",units:searchParams.units}).then(formatForecastWeather);case 6:formattedForecastWeather=_context.sent;return _context.abrupt(\"return\",_objectSpread(_objectSpread({},formattedCurrentWeather),formattedForecastWeather));case 8:case\"end\":return _context.stop();}}},_callee);}));return function getFormattedWeatherData(_x){return _ref.apply(this,arguments);};}();var formatToLocalTime=function formatToLocalTime(secs,zone){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"cccc | dd LLL yyyy' | 'hh:mm a\";return DateTime.fromSeconds(secs).setZone(zone).toFormat(format);};var iconUrlFromCode=function iconUrlFromCode(code){return\"http://openweathermap.org/img/wn/\".concat(code,\"@2x.png\");};export default getFormattedWeatherData;export{formatToLocalTime,iconUrlFromCode};","map":{"version":3,"names":["DateTime","API_KEY","BASE_URL","getWeatherData","infoType","searchParams","url","URL","search","URLSearchParams","appid","fetch","then","res","json","err","alert","console","log","formatCurrentWeather","data","coord","lat","lon","main","temp","feels_like","temp_min","temp_max","humidity","name","dt","sys","country","sunrise","sunset","weather","speed","wind","details","icon","formatForecastWeather","timezone","daily","hourly","slice","map","d","title","formatToLocalTime","day","getFormattedWeatherData","formattedCurrentWeather","exclude","units","formattedForecastWeather","secs","zone","format","fromSeconds","setZone","toFormat","iconUrlFromCode","code"],"sources":["/home/lordadhaar/repos/WeatherApp-react-tlwnd/src/services/weatherService.js"],"sourcesContent":["import { DateTime } from \"luxon\";\n\nconst API_KEY = \"20f7632ffc2c022654e4093c6947b4f4\";\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\";\n\n// https://api.openweathermap.org/data/2.5/onecall?lat=48.8534&lon=2.3488&exclude=current,minutely,hourly,alerts&appid=1fa9ff4126d95b8db54f3897a208e91c&units=metric\n\nfunction getWeatherData(infoType, searchParams){\n  \n  try{\n    const url = new URL(BASE_URL + \"/\" + infoType);\n    url.search = new URLSearchParams({ ...searchParams, appid: API_KEY });\n\n    return fetch(url).then((res) => res.json());\n  }\n  catch(err){\n    alert(err)\n    console.log(err)\n  }\n  \n};\n\nconst formatCurrentWeather = (data) => {\n  const {\n    coord: { lat, lon },\n    main: { temp, feels_like, temp_min, temp_max, humidity },\n    name,\n    dt,\n    sys: { country, sunrise, sunset },\n    weather,\n    wind: { speed },\n  } = data;\n\n  const { main: details, icon } = weather[0];\n\n\n  return {\n    lat,\n    lon,\n    temp,\n    feels_like,\n    temp_min,\n    temp_max,\n    humidity,\n    name,\n    dt,\n    country,\n    sunrise,\n    sunset,\n    details,\n    icon,\n    speed,\n  };\n};\n\nconst formatForecastWeather = (data) => {\n  let { timezone, daily, hourly } = data;\n  console.log(data);\n  daily = daily.slice(1, 6).map((d) => {\n    return {\n      title: formatToLocalTime(d.dt, timezone, \"ccc\"),\n      temp: d.temp.day,\n      icon: d.weather[0].icon,\n    };\n  });\n\n  hourly = hourly.slice(1, 6).map((d) => {\n    return {\n      title: formatToLocalTime(d.dt, timezone, \"hh:mm a\"),\n      temp: d.temp,\n      icon: d.weather[0].icon,\n    };\n  });\n\n  console.log(daily,hourly, timezone)\n\n  return { timezone, daily, hourly };\n};\n\nconst getFormattedWeatherData = async (searchParams) => {\n  const formattedCurrentWeather = await getWeatherData(\n    \"weather\",\n    searchParams\n  ).then(formatCurrentWeather);\n\n  const { lat, lon } = formattedCurrentWeather;\n\n  const formattedForecastWeather = await getWeatherData(\"onecall\", {\n    lat,\n    lon,\n    exclude: \"current,minutely,alerts\",\n    units: searchParams.units,\n  }).then(formatForecastWeather);\n\n  return { ...formattedCurrentWeather, ...formattedForecastWeather };\n};\n\nconst formatToLocalTime = (\n  secs,\n  zone,\n  format = \"cccc | dd LLL yyyy' | 'hh:mm a\"\n) => DateTime.fromSeconds(secs).setZone(zone).toFormat(format);\n\nconst iconUrlFromCode = (code) =>\n  `http://openweathermap.org/img/wn/${code}@2x.png`;\n\nexport default getFormattedWeatherData;\n\nexport { formatToLocalTime, iconUrlFromCode };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}